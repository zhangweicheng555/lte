<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>添加项目管理</title>
<link rel="stylesheet" type="text/css" media="screen" href="../../css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" media="screen" href="../../layui/css/layui.css">
</head>
<body>

	
	
	<form class="layui-form"  lay-filter="formDemo" id="formDemo" style="margin-top: 20px;">
	    <input  type="hidden" name="id" value="id" />
	  
	  
		   <div class="layui-form-item">
		    <label class="layui-form-label" style="width: 150px;">项目名称</label>
		    <div class="layui-input-inline" style="width: 400px;">
		      <select name="projIntro"  id="projIntro" lay-verify="required">
		        <option value="0">北京</option>
		        <option value="1">上海</option>
		        <option value="2">广州</option>
		        <option value="3">深圳</option>
		        <option value="4">杭州</option>
		      </select>
		    </div>
		     <div class="layui-form-mid layui-word-aux"><span style="color: red;">*</span></div>
		  </div>
		  
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width: 150px;">地市名称</label>
		    <div class="layui-input-inline" style="width: 400px;">
		      <input type="text" name="projName" id="projName"   required  lay-verify="required"  autocomplete="off" class="layui-input">
		    </div>
		     <div class="layui-form-mid layui-word-aux"><span style="color: red;">*</span></div>
		  </div>
		  
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width: 150px;">SIM地市名称</label>
		    <div class="layui-input-inline" style="width: 400px;">
		      <input type="text" name="projCode" id="projCode"  required  lay-verify="required"  autocomplete="off" class="layui-input">
		    </div>
		     <div class="layui-form-mid layui-word-aux"><span style="color: red;">*务必同SIM一致</span></div>
		  </div>
		  
		   <div class="layui-form-item">
		    <label class="layui-form-label" style="width: 150px;">SIM地市省份</label>
		    <div class="layui-input-inline" style="width: 400px;">
		      <input type="text" name="proProvice" id="proProvice"  required  lay-verify="required"  autocomplete="off" class="layui-input">
		    </div>
		     <div class="layui-form-mid layui-word-aux"><span style="color: red;">*务必同SIM省份一致</span></div>
		  </div>
		  
		  
		  <div class="layui-form-item">
		    <label class="layui-form-label" style="width: 150px;">排序码</label>
		    <div class="layui-input-inline" style="width: 400px;">
		      <input type="text" name="sort" id="sort"  placeholder="建议数字" required  lay-verify="required"  autocomplete="off" class="layui-input">
		    </div>
		     <div class="layui-form-mid layui-word-aux"><span style="color: red;">*</span></div>
		  </div>
	  
		<button class="layui-btn" id="formDemoBtn" style="display: none;" lay-submit lay-filter="formDemo">立即提交</button>
	</form>
	
	
	<script type="text/javascript" src="../../js/libs/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="../../layui/layui.js"></script>
	<script type="text/javascript" src="../../js/jq.js"></script>
	
<script>

	var flag=false;
	function submitForm(){
		$("#formDemoBtn").click();
		return flag;
	 }
	 
	
	var form;
	layui.use(['layer', 'form','jquery'], function(){
	  var layer = layui.layer,form = layui.form,$=layui.jquery;
	  //监听提交
	  form.on('submit(formDemo)', function(data){//JSON.stringify(data.field)  将form表格序列化了
		  flag=true;
	    return false;
	  });
	  
	  
	  
	  //初始化工作
	  initData();
	  function initData(){
			var id=getUrlParam("id");
			if(!id){
				layer.msg('获取数据ID异常');
				return;
			}
			
			
			//加载项目得选项
			  $.ajax({
				   type: "POST",url: "/projectmapper/findNowList",data: {},dataType:"json", async:false,
				   success: function(msg){
					 $("#projIntro").empty();
				     if(msg.success){
				    	var obj=msg.object;
				    	if(obj && obj.length>0){
				    		var html="";
				    		for(var i=0;i<obj.length;i++){
				    			var model=obj[i];
				    			html +='<option value="'+model.id+'">'+model.projName+'</option>';
				    		}
				    		$("#projIntro").append(html);
				    		form.render(); //更新全部
				    	}
				     }else{
				    	 layer.msg('查询项目信息不存在');
				     }
				   }
			});
			
			
			$.ajax({
				   type: "POST",url: "/project/findById",data: {"id":id},dataType:"json", async:false,
				   success: function(msg){
				     if(msg.success){
				    	var obj=msg.object;
				    	console.info(obj);
				 		form.val("formDemo", obj);
				     }else{
				    	 layer.msg('返回修改数据信息异常');
				     }
				   }
			});
		};
	});
	
	
	
	    
		
</script> 

</body>
</html>